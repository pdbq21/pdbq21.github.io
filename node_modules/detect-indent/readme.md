# detect-indent [![Build Status](https://travis-ci.org/sindresorhus/detect-indent.svg?branch=master)](https://travis-ci.org/sindresorhus/detect-indent)

> Detect the indentation of code

Pass in a string of any kind of text and get the indentation.


## Use cases

- Persisting the indentation when modifying a file.
- Have new content match the existing indentation.
- Setting the right indentation in your editor.


## Install

<<<<<<< .merge_file_xBgwnD
```sh
=======
```
>>>>>>> .merge_file_hMxdtD
$ npm install --save detect-indent
```


## Usage

<<<<<<< .merge_file_xBgwnD
```js
// modify a JSON file while persisting the indentation in Node
var fs = require('fs');
var detectIndent = require('detect-indent');
=======
Here we modify a JSON file while persisting the indentation:

```js
var fs = require('fs');
var detectIndent = require('detect-indent');

>>>>>>> .merge_file_hMxdtD
/*
{
    "ilove": "pizza"
}
*/
var file = fs.readFileSync('foo.json', 'utf8');
<<<<<<< .merge_file_xBgwnD
// tries to detect the indentation and falls back to a default if it can't
var indent = detectIndent(file).indent || '    ';
=======

// tries to detect the indentation and falls back to a default if it can't
var indent = detectIndent(file).indent || '    ';

>>>>>>> .merge_file_hMxdtD
var json = JSON.parse(file);

json.ilove = 'unicorns';

fs.writeFileSync('foo.json', JSON.stringify(json, null, indent));
/*
{
    "ilove": "unicorns"
}
*/
```


## API

Accepts a string and returns an object with stats about the indentation:  

<<<<<<< .merge_file_xBgwnD
* `amount`: {Number} the amount of indentation, e.g. `2`  
* `type`: {String|Null} the type of indentation. Possible values are `tab`, `space` or `null` if no indentation is detected  
* `indent`: {String} the actual indentation


## CLI

```sh
$ npm install --global detect-indent
```

```
$ detect-indent --help

  Usage
    detect-indent <file>
    echo <string> | detect-indent

  Example
    echo '  foo\n  bar' | detect-indent | wc --chars
    2
```
=======
* `amount` {number} - Amount of indentation, e.g. `2`  
* `type` {string|null} - Type of indentation. Possible values are `tab`, `space` or `null` if no indentation is detected  
* `indent`   {string} - Actual indentation
>>>>>>> .merge_file_hMxdtD


## Algorithm

The current algorithm looks for the most common difference between two consecutive non-empty lines.

In the following example, even if the 4-space indentation is used 3 times whereas the 2-space one is used 2 times, it is detected as less used because there were only 2 differences with this value instead of 4 for the 2-space indentation:

```css
html {
  box-sizing: border-box;
}

body {
<<<<<<< .merge_file_xBgwnD
  background: grey;
=======
  background: gray;
>>>>>>> .merge_file_hMxdtD
}

p {
    line-height: 1.3em;
    margin-top: 1em;
    text-indent: 2em;
}
```

<<<<<<< .merge_file_xBgwnD
[Source](https://medium.com/@heatherarthur/detecting-code-indentation-eff3ed0fb56b#3918).
=======
[Source.](https://medium.com/@heatherarthur/detecting-code-indentation-eff3ed0fb56b#3918)
>>>>>>> .merge_file_hMxdtD

Furthermore, if there are more than one most used difference, the indentation with the most lines is selected.

In the following example, the indentation is detected as 4-spaces:

```css
body {
<<<<<<< .merge_file_xBgwnD
  background: grey;
=======
  background: gray;
>>>>>>> .merge_file_hMxdtD
}

p {
    line-height: 1.3em;
    margin-top: 1em;
    text-indent: 2em;
}
```


<<<<<<< .merge_file_xBgwnD
=======
## Related

- [detect-indent-cli](https://github.com/sindresorhus/detect-indent-cli) - CLI for this module


>>>>>>> .merge_file_hMxdtD
## License

MIT Â© [Sindre Sorhus](http://sindresorhus.com)
